<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hegel 2052</title>

    <!-- ‚úÖ Favicon (aseg√∫rate de que este PNG est√© en la misma carpeta que este HTML) -->
    <link rel="icon" type="image/png" href="0b3fdba6-fb1b-4665-9b54-5cb246fc78ad.png" />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Exo+2:wght@400;600&display=swap");
      * { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: "Exo 2", sans-serif;
        background: radial-gradient(circle at center, #010518 0%, #000 100%);
        color: #ccfaff;
        overflow-x: hidden;
      }

      /* === Fondo futurista === */
      canvas#bg {
        position: fixed; top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: 0;
        background: radial-gradient(circle at center, #010518 0%, #000010 100%);
        pointer-events: none;
      }

      .container {
        position: relative; z-index: 2;
        display: flex; flex-direction: column;
        align-items: center; justify-content: center;
        min-height: 100vh;
        padding: 60px 20px 40px; text-align: center;
      }

      h1 {
        font-family: "Orbitron", sans-serif;
        font-size: 2.8em; text-transform: uppercase;
        letter-spacing: 6px;
        background: linear-gradient(90deg, #00ffff, #8b5cff);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        animation: glowPulse 3s infinite alternate;
        margin-top: 10px;
      }

      @keyframes glowPulse {
        from { text-shadow: 0 0 15px #00ffff, 0 0 25px #0077ff; }
        to { text-shadow: 0 0 30px #9b59ff, 0 0 50px #00ffff; }
      }

      .hegel-face {
        width: 240px; height: 240px; margin-bottom: 25px;
        stroke: url(#neonGradient); stroke-width: 1.1; fill: none;
        stroke-linecap: round; stroke-linejoin: bevel;
        filter: drop-shadow(0 0 15px #00ffff);
        opacity: 0.9; animation: facePulse 6s ease-in-out infinite alternate;
      }

      @keyframes facePulse {
        from { opacity: 0.8; filter: drop-shadow(0 0 10px #00ffff); }
        to { opacity: 1; filter: drop-shadow(0 0 25px #8b5cff); }
      }

      textarea {
        width: 90%; max-width: 550px; height: 130px;
        margin-top: 25px;
        background: rgba(0, 255, 255, 0.05);
        border: 1px solid #00ffff;
        color: #aafaff; font-size: 16px;
        border-radius: 12px; padding: 12px;
        resize: none; outline: none;
        backdrop-filter: blur(8px);
        box-shadow: 0 0 15px #0077ff33; z-index: 3;
      }

      button {
        margin-top: 20px;
        background: linear-gradient(90deg, #00ffff, #8b5cff);
        color: black; border: none;
        font-weight: bold; font-size: 16px;
        padding: 12px 35px; border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 0 20px #00ffff;
        transition: transform 0.2s, box-shadow 0.3s;
      }

      button:hover {
        transform: scale(1.08);
        box-shadow: 0 0 30px #9b59ff;
      }

      #respuesta {
        margin-top: 30px; width: 90%; max-width: 650px;
        background: rgba(0, 15, 25, 0.5);
        border-radius: 14px; padding: 25px;
        border: 1px solid #00ffff80;
        white-space: pre-wrap;
        font-size: 1.1em; text-shadow: 0 0 10px #00ffff99;
        min-height: 120px; line-height: 1.5;
        box-shadow: 0 0 20px #00336688 inset;
      }

      .cursor {
        display: inline-block; width: 8px; height: 1em;
        background-color: #00ffff; margin-left: 3px;
        animation: blink 1s infinite;
      }

      @keyframes blink { 0%,50%,100%{opacity:1;}25%,75%{opacity:0;} }

      .neon-flash { animation: neonFlash 2s ease-in-out; }
      @keyframes neonFlash {
        0%{text-shadow:0 0 0px #00ffff;}
        50%{text-shadow:0 0 25px #00ffff,0 0 40px #8b5cff;color:#e0ffff;}
        100%{text-shadow:0 0 5px #00ffff;}
      }

      footer {
        position: relative; z-index: 2; margin-top: 80px;
        padding: 25px 10px; text-align: center;
        background: rgba(0, 20, 40, 0.6);
        border-top: 1px solid rgba(0, 255, 255, 0.3);
        box-shadow: 0 -4px 25px rgba(0, 255, 255, 0.1);
        font-size: 1em; font-weight: 500;
        color: #c8ffff; text-shadow: 0 0 8px #00ffff;
      }

      footer a {
        color: #00ffff; text-decoration: none; font-weight: bold;
        text-shadow: 0 0 10px #00ffff; transition: 0.3s;
      }

      footer a:hover { color: #9b59ff; text-shadow: 0 0 15px #9b59ff; }

      @media (max-width:600px){
        h1{font-size:2em;}
        .hegel-face{width:160px;height:160px;}
      }
    </style>
  </head>

  <body>
    <canvas id="bg"></canvas>

    <div class="container">
      <svg class="hegel-face" viewBox="0 0 100 100">
        <defs>
          <linearGradient id="neonGradient" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#00ffff" />
            <stop offset="100%" stop-color="#8b5cff" />
          </linearGradient>
        </defs>
        <path d="M25 25 L75 25 Q90 40 80 75 Q70 95 50 95 Q30 95 20 75 Q10 40 25 25 Z" stroke="url(#neonGradient)" />
        <path d="M32 38 L45 36 M55 36 L68 38" stroke="#00eaff" />
        <circle cx="38" cy="45" r="2" fill="#00ffff" />
        <circle cx="62" cy="45" r="2" fill="#00ffff" />
        <path d="M35 67 Q50 76 65 67" stroke="#00ffff" fill="none" stroke-width="0.8" />
        <polygon points="50,15 42,25 58,25" stroke="#8b5cff" fill="none" stroke-width="0.8" />
      </svg>

      <h1>HEGEL 2052</h1>
      <p>Reflexi√≥n dial√©ctica del esp√≠ritu moderno</p>

      <textarea id="prompt" placeholder="Conversa con Hegel, lo que quieras..."></textarea>
      <button id="sendBtn">Consultar</button>
      <div id="respuesta"></div>
    </div>

    <footer>
      Creado por <a href="https://github.com/adriancorro" target="_blank">Adri√°n Corro</a>
      con ayuda de <strong>OpenAI</strong>
    </footer>

    <script>
      /* === Fondo futurista con l√≠neas de energ√≠a === */
      const canvas = document.getElementById("bg");
      const ctx = canvas.getContext("2d");
      let lines = [];
      function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
      window.addEventListener("resize", resize); resize();

      class Line {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height;
          this.length = Math.random() * 100 + 60;
          this.angle = Math.random() * Math.PI * 2;
          this.speed = Math.random() * 0.4 + 0.2;
          this.alpha = Math.random() * 0.4 + 0.1;
        }
        update() {
          this.x += Math.cos(this.angle) * this.speed;
          this.y += Math.sin(this.angle) * this.speed;
          if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
          }
        }
        draw() {
          const x2 = this.x + Math.cos(this.angle) * this.length;
          const y2 = this.y + Math.sin(this.angle) * this.length;
          ctx.strokeStyle = `rgba(0,255,255,${this.alpha})`;
          ctx.lineWidth = 1;
          ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.lineTo(x2, y2); ctx.stroke();
        }
      }

      for (let i = 0; i < 40; i++) lines.push(new Line());
      (function animate() {
        ctx.fillStyle = "rgba(0, 0, 20, 0.2)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        lines.forEach(l => { l.update(); l.draw(); });
        requestAnimationFrame(animate);
      })();

      /* === Comunicaci√≥n con API === */
      const sendBtn = document.getElementById("sendBtn");
      const respuestaDiv = document.getElementById("respuesta");

      function typeText(element, text, speed = 10, applyGlow = false) {
        element.innerHTML = "";
        let i = 0;
        const cursor = document.createElement("span");
        cursor.classList.add("cursor");
        element.appendChild(cursor);
        const interval = setInterval(() => {
          element.insertBefore(document.createTextNode(text.charAt(i)), cursor);
          i++;
          if (i >= text.length) {
            clearInterval(interval); cursor.remove();
            if (applyGlow) {
              element.classList.add("neon-flash");
              setTimeout(() => element.classList.remove("neon-flash"), 2500);
            }
          }
        }, speed);
      }

      sendBtn.addEventListener("click", async () => {
        const userPrompt = document.getElementById("prompt").value.trim();
        if (!userPrompt) { respuestaDiv.textContent = "Por favor, escribele a Hegel."; return; }
        respuestaDiv.textContent = "üåÄ Consultando a Hegel...";
        try {
          let API_URL =
            window.location.hostname.includes("localhost")
              ? "http://localhost:3000/api/route"
              : window.location.hostname.includes("hegel2052.com")
              ? "https://www.hegel2052.com/api/route"
              : "https://hegel2052.vercel.app/api/route";

          const res = await fetch(API_URL, {
            method: "POST", headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ prompt: userPrompt }),
          });
          const data = await res.json();

          if (data.result) {
            // Solo animar si proviene de keywords.js
            const isFromKeywords = data.fromKeywords === true || data.result.includes("Adri√°n Corro");
            if (isFromKeywords) typeText(respuestaDiv, data.result, 10, true);
            else respuestaDiv.textContent = data.result;
          } else respuestaDiv.textContent = "Error en la respuesta del servidor.";
        } catch (e) {
          console.error(e);
          respuestaDiv.textContent = "Error al conectar con el servidor.";
        }
      });

      /* === Meteorito futurista ‚Äú777‚Äù === */
      const meteorCanvas = document.createElement("canvas");
      meteorCanvas.style.cssText = "position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;";
      document.body.appendChild(meteorCanvas);
      const mctx = meteorCanvas.getContext("2d");

      function resizeMeteor() {
        meteorCanvas.width = innerWidth;
        meteorCanvas.height = innerHeight;
      }
      window.addEventListener("resize", resizeMeteor);
      resizeMeteor();

      function drawMeteor() {
        const startX = -50;
        const startY = Math.random() * innerHeight * 0.4;
        const endX = innerWidth + 100;
        const endY = startY + 200;
        const duration = 2000;
        const points = [];
        const startTime = performance.now();

        function animateMeteor(t) {
          const progress = (t - startTime) / duration;
          if (progress > 1) return;
          const x = startX + (endX - startX) * progress;
          const y = startY + (endY - startY) * progress;
          points.push({ x, y });
          if (points.length > 8) points.shift();

          mctx.clearRect(0, 0, meteorCanvas.width, meteorCanvas.height);
          for (let i = 0; i < points.length; i++) {
            const p = points[i];
            const alpha = i / points.length;
            mctx.beginPath();
            mctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
            mctx.fillStyle = `rgba(0,255,255,${alpha})`;
            mctx.shadowColor = "#8b5cff";
            mctx.shadowBlur = 15;
            mctx.fill();
          }

          mctx.font = "bold 28px Orbitron";
          mctx.fillStyle = "rgba(0,255,255,0.95)";
          mctx.shadowColor = "#8b5cff";
          mctx.shadowBlur = 25;
          mctx.fillText("777", x, y);

          requestAnimationFrame(animateMeteor);
        }
        requestAnimationFrame(animateMeteor);
      }
      setInterval(drawMeteor, 7000);
    </script>
  </body>
</html>