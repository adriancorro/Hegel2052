<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HEGEL 2052 — Cyberpunk Interface</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#05050a;
  --neon1:#00eaff;
  --neon2:#7a7aff;
  --panel: rgba(10,10,12,0.65);
}
*{box-sizing:border-box}
html,body{height:auto;margin:0;padding:0}

/* ✅ FIX: Esto elimina el bug del teclado en móvil */
body{
  background: radial-gradient(800px 400px at 10% 10%, rgba(122,122,255,0.03), transparent),
              radial-gradient(1000px 600px at 90% 90%, rgba(0,246,255,0.02), transparent),
              var(--bg);
  color: #cfefff;
  font-family: 'Orbitron', sans-serif;
  padding: 28px;
  display: block; /* ✅ FIX MÓVIL */
}

@media(max-width:880px){
  html,body{
    height:auto;
    min-height:100%;
  }
}

/* container */
.app {
  width:100%;
  max-width:980px;
  padding:22px;
  border-radius:14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.03);
  position:relative;
  overflow:hidden;
  box-shadow: 0 30px 70px rgba(0,0,0,0.6);
}

/* holographic triangle */
.logo {
  display:flex;
  align-items:center;
  gap:18px;
  margin-bottom:12px;
}

/* triangle breathing animation */
.triangle {
  width:72px;
  height:72px;
  position:relative;
  filter: drop-shadow(0 0 18px rgba(0,234,255,0.12));
}
.triangle svg { width:100%; height:100%; display:block; }

@keyframes breathe {
  0% { transform: scale(0.98); opacity: 0.85; filter: drop-shadow(0 0 12px rgba(0,234,255,0.08)); }
  50% { transform: scale(1.06); opacity: 1; filter: drop-shadow(0 0 28px rgba(0,234,255,0.28)); }
  100% { transform: scale(0.98); opacity: 0.85; filter: drop-shadow(0 0 12px rgba(0,234,255,0.08)); }
}
.core { animation: breathe 3.6s ease-in-out infinite; }

/* title */
.title {
  font-size:clamp(18px,3vw,34px);
  background:linear-gradient(90deg,var(--neon1),var(--neon2));
  -webkit-background-clip:text;
  color:transparent;
}

/* layout */
.grid { display:grid; grid-template-columns:1fr 360px; gap:18px; align-items:start; }
@media(max-width:880px){ .grid{grid-template-columns:1fr} .right{order:2} }

.left { padding:8px; }

/* textarea input */
textarea#prompt {
  width:100%;
  min-height:140px;
  padding:14px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  background: rgba(0,0,0,0.55);
  color:inherit;
  font-size:15px;
  resize:vertical;
  outline:none;
}

/* buttons */
.controls{display:flex;gap:10px;margin-top:12px}
.btn{
  padding:11px 14px;
  border-radius:10px;
  border:0;
  cursor:pointer;
  font-weight:700;
  background: linear-gradient(90deg,var(--neon1),var(--neon2));
  color:#001b20;
}
.btn.ghost{
  background:transparent;
  border:1px solid rgba(255,255,255,0.04);
  color:#bfeeff;
}

/* reply panel */
.right{
  background: rgba(255,255,255,0.02);
  border-radius:12px;
  padding:14px;
  border:1px solid rgba(255,255,255,0.02);
  min-height:220px;
  backdrop-filter: blur(6px);
}
#reply { margin:0; white-space:pre-wrap; color:#dff; font-family:monospace; }
.status{font-size:13px;color:#9fbefb;opacity:0.9;margin-top:8px}

/* scanlines */
.scanlines{
  position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen;
  background-image: linear-gradient(rgba(0,0,0,0), rgba(255,255,255,0.01) 1px);
  background-size:100% 6px; opacity:0.06;
}

/* startup */
.startup{
  font-family:monospace;
  font-size:13px;
  color:#7fefff;
}
.startup .dot{opacity:0; animation: blink 1.4s linear infinite;}
@keyframes blink{0%{opacity:0}50%{opacity:1}100%{opacity:0}}

.footer{text-align:center;margin-top:12px;font-size:12px;color:#9fbefb;opacity:0.85}
</style>
</head>

<body>

<div class="app">
  <div class="scanlines"></div>

  <div class="logo">
    <div class="triangle">
      <svg viewBox="0 0 100 100">
        <defs>
          <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0" stop-color="#00eaff"/>
            <stop offset="1" stop-color="#7a7aff"/>
          </linearGradient>
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="3" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>

        <g class="core" filter="url(#glow)">
          <path d="M50 8 L92 86 L8 86 Z" fill="none" stroke="url(#g)" stroke-width="3"/>
          <path d="M50 18 L82 78 L18 78 Z" fill="none" stroke="rgba(0,234,255,0.16)" stroke-width="1.5"/>
        </g>
      </svg>
    </div>

    <div>
      <div class="title">HEGEL 2052 =)</div>
      <div class="startup">Cargando Sistema<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></div>
    </div>
  </div>

  <div class="grid">
    <div class="left">
      <textarea id="prompt" placeholder="Escribe tu pregunta para Hegel... :8 "></textarea>

      <div class="controls">
        <button class="btn" id="sendBtn">Preguntar</button>
        <button class="btn ghost" id="clearBtn">Limpiar</button>
      </div>

      <div id="status" class="status"></div>
    </div>

    <div class="right">
      <pre id="reply">La respuesta aparecerá aquí...</pre>
    </div>
  </div>

  <div class="footer">hegel2052 — Cyberpunk Edition</div>
</div>

<script>
const sendBtn = document.getElementById('sendBtn');
const clearBtn = document.getElementById('clearBtn');
const promptEl = document.getElementById('prompt');
const replyEl = document.getElementById('reply');
const statusEl = document.getElementById('status');

clearBtn.onclick = () => {
  promptEl.value='';
  replyEl.textContent='La respuesta aparecerá aquí...';
  statusEl.textContent='';
};

sendBtn.onclick = async () => {
  const prompt = promptEl.value.trim();
  if(!prompt){
    statusEl.textContent='Escribe una pregunta primero.';
    return;
  }

  statusEl.textContent='Consultando a Hegel...';
  sendBtn.disabled = true;

  try {
    const r = await fetch('/api/hegel', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ prompt })
    });

    const data = await r.json();

    if(data.response) replyEl.textContent = data.response;
    else replyEl.textContent = 'Error: ' + (data.error || 'Desconocido');

  } catch (err) {
    replyEl.textContent = 'Error al conectar con el servidor.';
  }

  sendBtn.disabled = false;
  statusEl.textContent='';
};
</script>

</body>
</html>
